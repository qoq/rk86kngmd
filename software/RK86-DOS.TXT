						       (C) ТОО ЛИАНОЗОВО, 1992

	    DOS РАДИО-86РК. РУКОВОДСТВО ПО ИНТЕРФЕЙСУ ПОЛЬЗОВАТЕЛЯ
	    ------------------------------------------------------

			     С О Д Е Р Ж А Н И Е
								 Стр
	  1. Общие положения . . . . . . . . . . . . . . . . . .  2
	  2. Комплектность изделия . . . . . . . . . . . . . . .  3
	  3. Гарантийные обязательства . . . . . . . . . . . . .  3
	  4. Порядок подключения . . . . . . . . . . . . . . . .  3
	  5. Описание интерфейса РК-ДОС  . . . . . . . . . . . .  4
		5.1 Особенности РК-ДОС . . . . . . . . . . . . .  5
		5.2 Имена файлов и групповые имена . . . . . . .  6
		5.3 Резидентные команды ДОС  . . . . . . . . . .  6
		5.4 Внешние команды ДОС  . . . . . . . . . . . .  7
		5.5 Граф.операционная оболочка ДОС . . . . . . .  9
		5.6 Исполняемые файлы BAT, SYS и COM . . . . . .  9
		5.7 Последовательные каналы вв/выв . . . . . . . 10
		5.8 Сообщения об ошибках в РК-ДОС  . . . . . . . 11
		5.9 Формат хранения данных на диске. . . . . . . 11
		5.10 Прикладные программы ДОС  . . . . . . . . . 12
	  6. Приложение
		6.1 Таблица соответствия сигналов разъемам . . . 13
		6.2 Схема установки ИМС 555ИД7 в ПЭВМ РК86 . . . 14
		6.3 Принц.схема КНГМД и схема расположения ИМС . 15
		6.4 Каталог и контр.суммы сист.файлов ДОС  . . . 16
		6.5 Дамп основного ПЗУ с РК-ДОС и и внешних сист.
		    программ FORMAT, FCOPY, RENAME, COMMAND  . . 17



			    1. ОБЩИЕ ПОЛОЖЕНИЯ

      Контроллер накопителя на гибких магнитных дисках (КНГМД) предназначен для
сопряжения ПЭВМ "Радио-86РК"  (и других совместимых ЭВМ) и дискового накопителя
типа ЕС5311, 5305, 6321, 5313, 5350, TEAC-FR55 (т.е любых НГМД имеющих 2 сторо-
роны и 80 дорожек). High-Density дисководы  на 5.25"  не  могут использоваться,
т.к они обеспечивают большую скорость вращения диска  и  требуют изменения схе-
мы КНГМД, но High-density дисководы на 3.5"  могут  использоваться  с    данным
КНГМ, т.к не отличаются по скорости вращения  диска  от обычных  DD-дисководов.
   Применение в компьютере дискового накопителя существенно повышает скорость и
удобство  обмена  данными с устройством внешней памяти. Для повышения  удобства
работы программы  обслуживания НГМД (ДОС), располагаются прямо во встроенном  в
контроллер постоянном запоминающем устройстве (обьемом в 4Кб - т.е  размещается
в двух ПЗУ К573РФ2 или в одном ПЗУ 2732). Мощная дисковая операционная  система
обеспечивает  широкие и удобные  возможности  по управлению файлами с данными и
программами.  В комплект дополнительного программного обеспечения, поставляемо-
го вместе с КНГМД,  входят дисковые версии всех известных языков программирова-
ния - FORTH, BASIC, PASCAL, "СИ", ассемблер  процессора КР580 а также  отладчик
для К580 и дисковая версия текстового редактора "МИКРОН". Установка контроллера
требует  несложной  доработки компьютера, но при покупке готового КНГМД никакой
дополнительной настройки  не  требуется. Данная версия программного обеспечения
рассчитана на стандартный журнальный вариант ПЭВМ "Радио-86РК" с объемом ОЗУ  в
32К и журнальным МОНИТОРОМ (1986 года).  Данная дисковая  операционная  система
является коммерческой интелектуальной собственностью фирмы и не  может продава-
ться (или распространяться в любом виде) любыми предприятиями  или частными ли-
цами, а также адаптироваться для других ЭВМ (без согласования с фирмой) и защи-
щается законодательством о авторском праве Российской Федерации (от 1991 года).

			 2. КОМПЛЕКТНОСТЬ ИЗДЕЛИЯ

	       Готовый контроллер КНГМД, шт . . . . . . .  1
	       Руководство по эксплуатации, шт  . . . . .  1
	       Гибкий магнитный диск ГМД130, шт . . . . .  2
	       Соединительный шлейф с разьемами, шт . . .  1
	       Микросхема 555ИД7, шт  . . . . . . . . . .  1
	       Упаковка . . . . . . . . . . . . . . . . .  1

Примечание. Для любителей самостоятельной сборки конструкций,  поставляется на-
бор "плата КНГМД и ДОС". При этом  предоставляется  чистая  неспаянная печатная
плата, ДОС (в виде дампов или прошитая в ПЗУ), дискеты с системным ПО и докуме-
нтация по настройке и работе с ДОС. При этом не принимаются  никакие рекламации
от несумевших "оживить" КНГМД, малоопытных радиолюбителей. При покупке контрол-
лера или набора для его сборки, убедитесь в сохранности пломб на корпусе и про-
верьте комплект поставки по паспорту. Количество поставляемых с ДОС  дополните-
льных прикладных и системных программ определяется конкретным заказом на ПО  по
текущим каталогам фирмы "ТОО ЛИАНОЗОВО".

		       3. ГАРАНТИЙНЫЕ ОБЯЗАТЕЛЬСТВА

Предприятие-изготовитель гарантирует безотказную работу контроллера НГМД. Неис-
правности обнаруженные в течение 12 месяцев  со  дня  продажи  или изготовления
(если нет отметки о дате продажи) устраняются бесплатно  (за  счет предприятия)
самим предприятием ("ТОО ЛИАНОЗОВО"). Неисправности накопителя (НГМД) и  неисп-
равности,  возникшие при несоблюдении "Инструкции по эксплуатации", не являются
причиной для претензий к качеству изделия. За потери информации на дискетах при
использовании некачественных дискет или при использовании нефирменного  систем-
ного ПО (т.е при использовании ДОС или прикладных программ других  производите-
лей), а также  за  любые  убытки, вызванные ошибками в поставляемом программном
обеспечении, фирма "ТОО ЛИАНОЗОВО" ответственности не несет.

		      4. ПОДКЛЮЧЕНИЕ КНГМД К КОМПЬЮТЕРУ

      Контроллер и НГМД соединяются специальным ленточным кабелем в 34 провода,
оканчивающимся  со  стороны НГМД врубным разьемом дисковода, а с другой стороны
стандартным разъемом для контактной колодки на плате КНГМД. Данные разьемы "на-
калываются" на ленточный кабель, что обеспечивают удобство и надежный  контакт.
Длина гибкого ленточного кабеля не должна быть более 50-60 см.    К  компьютеру
КНГМД подключается через системный разьем. В ПЭВМ "МИКРОША" имеется врубной ра-
зьем (слот) на 60 контактов, соответствующий разьему на плате КНГМД.  Для само-
дельных компьютеров "Радио-86РК" также полезно поставить такой разъем-слот,  но
можно выполнить подключение КНГМД с помощью припайки  соединительных  проводов.
Для того, чтобы при включении питания при случайно закрытом "кармане" дисковода
не было "случайных записей" на диск, питание на КНГМД должно подаваться  однов-
ременно с питанием компьютера, т.е целесообразно питание КНГМД, дисковода и ко-
мпьютера от одного общего источника. Следует учесть, что КНГМД потребляет допо-
лнительные 300 мА по цепи 5В, а дисковод потребляет 1А.   Так как контроллер не
формирует сигнал START (для мотора), то необходимо соединить в дисководе сигна-
лы "ВЫБОР" (DSO или DS1 для второго НГМД) с сигналом START. Доработайте компью-
тер РК86, установкой дополнительного дешифратора 555ИД7 (для сигналов CSE000  и
CSE800). Подключите КНГМД к компьютеру и включите питание. Командой  МОНИТОРА D
убедитесь,  что по адресам E000-EFFFh считываются коды RK-DOS (см.дамп в прило-
жении), и  с помощью команд W/D проконтроллируйте по адресам F000-F003h наличие
регистров БИС 580ВВ55 на плате контроллера.   После этого, открыв "карман" НГМД
(во избежание порчи дискеты при старте ДОС) запустите  ДОС  командой  МОНИТОРА:
GE000<ВК>. На экране появится надпись "RK-DOS V3.0", загорится индикатор на ди-
сководе и включится двигатель привода дискеты.   Через некоторое время появится
надпись "FILE NOT FOUND" и приглашение к работе - сообщение "A>". Система гото-
ва к работе. Далее Вы можете руководствоваться описанием DOS.

      Несколько полезных советов для начинающих пользователей РК-ДОС:
      ---------------------------------------------------------------
1. Ознакомившись с описанием ДОС, первым делом отформатируйте новый диск и ско-
пируйте полученный Вами системный диск. Затем диск-оригинал уберите в сейф. Не-
смотря на то, что на всякий случай, мы посылаем две копии системных файлов,  не
работайте с оригинальными дисками, иначе в случае их выхода из строя Вам приде-
тся заново покупать системный диск.
2. При наличии только одного НГМД полезно, а часто и необходимо иметь  на  всех
дисках копии системных файлов ДОС.
3. Защищайте файлы от стирания или случайной перезаписи командой ATTRIB
4. Всегда храните "эталонные копии"  важных  или  нужных программ,  заклейте на
архивных дискетах "вырез для защиты от записи"
5. Никогда не открывайте "карман" НГМД и не нажимайте на "сброс", если дисковод
выбран (т.е вращается  мотор  и  горит  индикатор)  -  иначе Вы испортите диск.
6. Не оставляйте дискету в "кармане" дисковода при включении/выключении питания
и при старте ДОС - "случайные процессы записи" могут испортить данные на диске.
7. Если Ваш врубной разьем НГМД не имеет ключа будьте особенно осторожны, чтобы
не перепутать его подключение. В противном случае может сгореть НГМД или КНГМД.

   Если Вы получили данное описание для самостоятельной настройки КНГМД, то ис-
используйте  тест  и  рекомендации по настройке КНГМД  из ж.РАДИО N2 1993 года,
также при установке RK-DOS на "Радио-86РК"  воспользуйтесь схемами и дампом те-
ста из данной статьи. ЭВМ "СПЕЦИАЛИСТ" уже имеет "чип-селекты" E000,E800 и F000
и поэтому установка дешифратора не требуется. При подключении второго НГМД  не-
обходимо вытащить из дисковода A:  резистивную матрицу (для привязки сигналов).
Распайку системного разьема (стандарт "МИКРОШИ") можно взять из ж.РАДИО N2,1993

		 5. ОПИСАНИЕ ИНТЕРФЕЙСА ПОЛЬЗОВАТЕЛЯ РК-ДОС

	      5.1 Особенности РК-ДОС и интерфейс пользователя

Дисковая операционная система (ДОС) ПЭВМ "Радио-86РК" предназначена для записи,
хранения, считывания и управления информации в виде файлов на гибком  магнитном
диске (ГМД) 5.25 дюйма (130 мм диаметром). При этом емкость  одного  диска (для
данных пользователя) составляет 397,5 Кбайт. Формат записи соответствует методу
частотной модуляции FM (не MFM). Под интерфейсом пользователя ДОС понимают воз-
можности, которые имеет пользователь, т.е команды ДОС. Под интерфейсом програм-
миста понимают функции ДОС, доступные программисту для использования возможнос-
тей системы при разработке дисковых программ (см.файлы  DOS1.TXT  и  DOS2.TXT).

Данная операционная система относится к разряду самых простых дисковых операци-
онных систем для 8-ми разрядных компьютеров и имеет обьем кода всего в 4 Кб. По
функциональным возможностям  (набору сист.функций и команд пользователя) RK-DOS
не уступает самым  известным ДОС для 8-ми разрядных микропроцессоров, таким как
Apple DOS (10 Кб), ISIS (DOS SO, 10 Кб), а лучшей 8-ми  разрядной  ДОС  CP/M-80
(10 Кб), уступает лишь в гибкости (простоте адаптации к "железу"). Вместе с тем
благодаря наличию одинаковых возможностей возможна легкая адаптация программ от
любой ДОС для процессора КР580 (ISIS, BROS и CP/M) для данной системы RK-DOS, а
также использование DOS на любых ЭВМ с процессором КР580 и BIOS по адресу F800.
По некоторым параметрам RK-DOS  превосходит CP/M-80 (поддержка перемещаемых ре-
зидентных драйверов ДОС - файлов с расширением SYS, а также возможность загруз-
ки файлов по любым адресам ОЗУ, наличие BAT-файлов). К достоинствам RK-DOS так-
же относится простота и дешевизна схемы КНГМД, не требующая применения  дорогих
и ненадежных БИС FDC К1818ВГ93.

Операционная система РК-ДОС может работать на ЭВМ "МИКРОША", "Радио-86РК, осна-
щенных ОЗУ обьемом в 32К, а также  на ЭВМ "СПЕЦИАЛИСТ-48К" (ленинградский мони-
тор, имеющий вызовы F800) совместно с КНГМД по схеме из журнала РАДИО N1-2 1993
года. Для использования РК-ДОС на ПРК ОРИОН-128 необходима модернизация РК-ДОС,
т.к по адресу F000 в ОРИОНЕ-128 не "включить" порт 580ВВ55 (хотя отсутствие ПЗУ
в области E000-EFFF не  вредит, т.к ДОС можно загрузить и в ОЗУ E000-EFFF ОРИО-
НА-128).   При  использовании РК-ДОС на "СПЕЦИАЛИСТЕ" можно устанавливать ПЗУ с
ДОС как  вместо  ПЗУ  пользователя на основной плате, так и в панельку на плате
KНГМД. Сама программа ДОС располагается в ПЗУ в адресном пространстве компьюте-
ра по адресам E000-EFFFh, не используемом ВУ и основной памятью.  Однако в про-
цессе работы ДОС использует для служ.ячеек, также область ОЗУ 7500-75FFh. Кроме
этого при выполнении некоторых  функций и резидентных команд ДОС, по мере необ-
ходимости занимаются и освобождаются блоки  по  256 байт (100h) в верхней части
свободной памяти. При выполнении команд DIR, SAVE, LOAD  занимается  300h ячеек
памяти с 7200h по 74FFh, команда TYPE занимает 400h байт (7100h-74FFh).  Откры-
тие файла занимает (вниз от верхней границы свободной  памяти)  400h  байт  при
открытии файла на чтение и 500h при открытии файла для записи. В процессе обра-
ботки пакетного командного файла занимается 500h байт.  Если в пакетном команд-
ном файле выполняется команда DIR, то занято 300H+500H=800H байт  (6D00-74FFh),
а в случае запуска еще одного исполняемого файла - A00h байт.

В служебной области ДОС, ячейки памяти имеют следущее назначение:

	     +--------+----------------------------------+
	     |  75FF  |                                  |
	     |        |  Рабочие ячейки ДОС              |
	     |  75C0  |                                  |
	     +--------+----------------------------------+
	     |  75BF  |                                  |
	     |        |  Системные переменные ДОС        |
	     |  7540  |                                  |
	     +--------+----------------------------------+
	     |  753F  |                                  |
	     |        |  Буфер ввода с клавиатуры        |
	     |  7500  |                                  |
	     +--------+----------------------------------+
	     |  74FF  |                                  |
	     |        |  Верхняя граница свободного ОЗУ  |
	     +--------+----------------------------------+

   Пользователь осуществляет диалог с ДОС посредством команд вводимых с клавиа-
туры и завершаемых нажатием клавиши <ВК>. В процессе работы система  выдает со-
общения на дисплей (или на другой "канал для вывода" информации, напр: принтер)
     Запуск ДОС осуществляется командой встроенного МОНИТОРА ПЭВМ РК85 запуском
программы  с  адреса E000h: GE000 <ВК>. При этом устанавливается текущим первый
накопитель (А) и, если это первый запуск ДОС после включения ПЭВМ, то загорает-
ся индикатор НГМД и начинается поиск на диске файла с именем AUTOEXEC.BAT - т.е
пакетного командного  файла автозапуска при старте (см.раздел "Исполняемые фай-
лы"). Если такого файла  на диске нет, то будет выведено сообщение FILE NOT FO-
UND и на экране появится  приглашение ДОС к вводу команд (промпт с именем теку-
щего дискового привода):
   A>
Это означает, что система  готова к приему команд и текущим дисководом является
накопитель A. Система может работать с двумя накопителями - A: и B: (после обо-
значения накопителя всегда  ставится двоеточие). При вводе команды для работы с
файлом, расположенным не на текущем  диске надо после самой команды вводить имя
диска а затем параметры команды и имена  файлов.  Для смены текущего накопителя
достаточно набрать имя диска (с двоеточием) и <ВК>. Команды вводятся латинскими
буквами и параметры отделяются пробелами:
   A>B:<ВК>
Если в системе присутствует второй НГМД и  в нем  установлена дискета, появится
новый промпт системы, указывающий, что текущим  стал  диск B: - сообщение B>. В
противном случае будет выдано  сообщение  NO DISK  и  текущим останется диск A.
Если в командной строке, после имени накопителя будет указана команда, то после
смены накопителя она будет выполнена (т.е можно обьединять смену текущего диска
и запуск команды). Например:
   A>B: DIR<ВК>
После этого будет выдан каталог  диска  установленного в привод B: и произойдет
смена текущего накопителя на B.  Смены  текущего накопителя не произойдет, если
указать имя накопителя после команды DIR:
   А>DIR B:<ВК>

	      5.2 Имена файлов в ДОС и групповые имена

Файлом называется любой проименованный  блок данных, хранимый на физическом но-
сителе (в данном случае на ГМД). Это может быть любая информация - тексты, про-
граммы или просто любой массив HEX-кодов. Однако в зависимости от характера ин-
формации, файлу присваивается тип (или расширение).   Тип  или расширение файла
определяются программой, создавшей файл  (или  задаются  пользователем) и могут
быть любыми, но для исполняемых файлов используются только стандартные расшире-
ния - COM, SYS и BAT. Имя файла может  содержать до  10  символов (не 8, как во
многих ДОС, напр: ISIS или CP/M), а тип может отсутствовать или состоять из 1-3
символов. В именах допустимо использовать только буквы и  цифры.    Имя файла и
его  тип  образуют "полное имя файла" и используются для идентификации  файлов.
Для задания одновременно группы файлов, имеющих одинаковые буквы в имени, можно
использовать "шаблон имени", то есть групповое имя. Для задания имени можно ис-
пользвать символы "*" и "?". Символ  зведочка (*) заменяет любое количество лю-
бых символов, а символ "?" заменяет один произвольный символ имени. Шаблоны для
задания имен удобно использовать в команде DIR, ERASE, ATTRIB:
   A>DIR S*.* - вывод списка всех файлов, имена которых начинаются с буквы 'S',
		независимо от расширения файлов
   A>DIR *ON.* - вывод  всех  файлов,  имена которых кончаются на 'ON', с любым
		 расширением имени файла
   A>DIR ?.TXT - на экран будут выведены  имена  текстовых файлов, имеющих лишь
		 одну (любую) букву в имени
   A>DIR L?L.* - все файлы с трехбуквенными именами, начинающимися и оканчиваю-
		 щимися буквой 'L', независимо от типа файла

		     5.3 Резидентные команды ДОС

Команды могут быть - встроенные в  ДОС  (внутренние или  резидентные) и внешние
(хранимые на системном диске).  Любые исполняемые программы (и командные файлы)
являются внешними командами для  ДОС,   т.е имена этих файлов можно вводить как
команды для запуска этих файлов на исполнение. Резидентные команды - это наибо-
лее часто используемые команды, встроенные в ДОС.  Имена  резидентных команд не
могут быть использованы, как имена для исполняемых  файлов. Встроенные команды:

DIR [имя диска:] [имя.тип] -  просмотр каталога диска.  Параметры "имя диска" и
"полное" или групповое имя файлов не являются обязательными и могут опускаться.
При задании конкретного имени можно узнать о наличии  данного файла на диске, а
без указания имени файлов выводится список всех несистемных файлов (т.е файлов,
не имеющих атрибута невидимости). Выводится список  файлов с полным именем (т.е
имя и расширение), а также размер каждого сектора (в секторах по 0.5 Кб). После
выдачи каталога выводится статистика диска: количество файлов и количество сво-
бодных секторов на диске. Нажатие клавиши пробел - приостанавливает вывод (про-
должение по нажатию любой клавиши),  нажатие F4 (Контрол-Цэ) - досрочное завер-
шение вывода каталога и выход в ДОС. Файлы с  атрибутом  защиты  помечаются при
выводе символом '*', а файлы с атрибутом "невидимости" не выводятся.

TYPE [имя диска:] имя[.тип] - вывод содержимого файла на экран (или в указанный
канал вывода, см.раздел "Последов.каналы ввода/вывода").  Действие клавиш [про-
бел] и F4 аналогично команде DIR. Если тип файла не указан, то будет распечатан
первый встретившийся файл с указанным именем и любым расширением. Не допускает-
ся использование шаблонов имен (групповых имен). Пример:
   A>TYPE ОПИСАНИЕ1.TXT<ВК>

LOAD [имя диска:] имя[.тип] - загрузить файл в память. Если тип файла не указан
то будет загружен первый файл с указанным именем. Не  допускается использование
шаблонов имен. Пример:
   A>LOAD BASIC<ВК>

SAVE [имя диска:] имя[.тип],нач.адр,кон.адр - запись  блока данных из заданного
интервала адресов ОЗУ в дисковый файл. Адреса начала и конца блока задаются HEX
числами (аналогично команде "D" МОНИТОРА). Допускается запись в файл данных  из
участков памяти 0-71FFh и 76D0-FFFFh, однако следует  помнить, что верхняя гра-
ница памяти 71FFh может оказаться значительно ниже,  если  команда  запускается
пакетным файлом (а не с клавиатуры, т.е CCP ДОС), а также, когда  есть открытые
для чтения или записи файлы. В любом случае, когда указаны недопустимые границы
адресов ДОС выводит сообщение "SYNT ERR". Пример:
   A>SAVE B: BASIC.COM,0,22FF<ВК>
   A>SAVE PACMAN.COM,6000,71FF<ВК>

		      5.4 Внешние команды RK-DOS

Внешние команды - это обычные исполняемые программы, загружаемые с диска, как и
прикладные программы. Фирма "ЛИАНОЗОВО" поставляет вместе с системой RK-DOS не-
сколько входящих в систему, внешних команд - системных файлов RK-DOS,  а  также
операционную оболочку (НОРТОН)  для  упрощения  работы с файлами. Файлы внешних
команд  хранят на системном диске (если дисководов два) или необходимо скопиро-
вать на используемый диск файл внешней команды (если дисковод один).

RENAME [имя диска:] старое имя.тип1,новое имя[.тип2] - переименование файла.
Если на диске уже имеется файл с присваиваемым именем, то выдается сообщение об
ошибке. Использование шаблонов имени недопустимо. Пример:
   A>RENAME START.TXT,AUTOEXEC.BAT<ВК>
   B>RENAME A: README.TXT,HELLO.TXT
Во втором случае файл команды находится на диске B: но переименовывает файл на
диске в приводе A:.

ERASE [имя диска:] имя.тип - удаление файла.  Команда  допускает  использование
групповых имен файлов. В этом случае будут  удалены  все  файлы соответствующие
заданному шаблону. При использовании шаблона '*.*' удаляются все "незащищенные"
от (пере)записи файлы (см.ATTRIB). Пример:
   A>ERASE START.TXT<ВК>
   A>ERASE B: *.BIN<ВК.

FORMAT имя диска:[/SN] - форматирование (т.е разметка на секторы в формате ДОС)
нового (чистого, еще не форматированного или "дохлого" диска). При форматирова-
нии диск подготавливается для дальнейшей записи файлов   (дорожки "размечаются"
на сектора) и вся имеющаяся ранее на этом диске информация  полностью теряется.
Любой новый диск перед использованием необходимо отформатировать.   Операция по
времени сравнительно продолжительная (время форматирования зависит от количест-
ва "дохлых" секторов на диске). С помощью необязательного ключа /S  можно изме-
нить объем резервируемой для каталога файлов области диска.  N может  принимать
значение от 1 до 99. Если ключ /S не задавать, то   по умолчанию  резервируется
стандартная длина каталога в 4 сектора. По завершении  операции  команда FORMAT
выдает сообщение о годном для записи файлов количестве секторов диска (а дохлые
сектора помечаются как непригодные для файлов).  Если дискета хорошего качества
(и дисковод не "полудохлый")    и ДОС при форматировании не забракует ни одного
сектора, то при стандартном резервировании под каталог 4  секторов,  количество
свободных секторов, пригодных для хранения файлов, будет - 795 (около 400 Кб).

ATTRIB [имя диска:] имя[.тип],W/N или R/N - установка атрибутов файла. Возможно
использование шаблонов имен файлов. Файлы в RK-DOS могут иметь 2 атрибута - ат-
рибут защиты от перезаписи (стирания) и атрибут "невидимости"  (при  выводе  по
команде DIR). Командой W/1 устанавливается, а командой  W/0  снимается  атрибут
защиты от записи. Командой R/1 устанавливается, а командой  R/0 снимается атри-
бут невидимости файла. Атрибут невидимости удобно присваивать всем файлам внеш-
них команд ДОС, чтобы они не выводились при команде DIR и не  занимали места на
экране. Пример:
   A>ATTRIB ASM.COM,W/1<ВК>
   A>ATTRIB *.SYS,R/1<ВК>
   A>ATTRIB B: *.COM,W/0<ВК>
   A>ATTRIB *.*,R/0<ВК>

FCOPY имя.тип  - копирование файла на одном дисководе. На диске с исходным (ко-
пируемым) файлом должен быть файл FCOPY.SYS. После чтения в ОЗУ  файла с исход-
ной дискеты выдается приглашение заменить диск. После установки требуемого дис-
ка нажимают любую клавишу. Пример:
   A>FCOPY ASM.COM<ВК>

FCOPY2 имя.тип - копирование файлов в двухдисковых системах с текущего  накопи-
теля на другой дисковод. Копирование происходит без остановок, в обоих  накопи-
телях должны быть заранее установлены диски (исходный файл в текущем  приводе).
На исходном диске должен быть файл FCOPY2.SYS. Пример:
   A>FCOPY2 FORTH.COM<ВК>

TCOPY [имя диска:] имя.тип  - вывод дискового файла на магнитофон.  На исходном
диске должен быть файл TCOPY.SYS. Сразу после загрузки в ОЗУ с диска указанного
файла, начинается его вывод на магнитофон в формате МОНИТОРА. Пример:
   A>TCOPY BASIC.COM<ВК>

LOADA [имя диска:] имя[.тип] - то же, что и LOAD, но с выдачей на экран адресов
начала и конца загружаемого файла. На диске  должен  быть  файл  LOADA.SYS.

	       5.5 Графическая операционная оболочка RK-DOS

  Оболочка предназначена для большего удобства выполнения операций копирования,
переименования и удаления файлов и использует "НОРТОНО"-подобный интерфейс. Па-
кет оболочки состоит из двух файлов:
SE.COM - стартовый файл программы
SE.EXE - дополнительный (оверлейный) файл с кодами
Оба эти файла должны находиться на одном диске. После запуска (командой SE<ВК>)
выводится  таблица  в  три колонки с именами всех файлов,  имеющихся на текущем
диске. В самой верхней строке "выводится строка подсказки", в нижней строке вы-
водится информация о текущем дисководе. Оболочка позволяет вводить любые коман-
ды RK-DOS или имена исполняемых файлов (также как в самой DOS). Введенная кома-
нда выводится "эхо-печатью" в нижней строке экрана и также, как при ее вводе из
ДОС запускается по нажатию клавиши <ВК>. Так запускаются внешние команды требу-
ющие параметров или имен файлов в командной строке. Однако программы, не требу-
ющие длинной командной строки удобнее запускать  просто  переместив  на  нужный
файл указатель (подсветку) с помощью курсорных  клавиш  и  нажав  клавишу <ВК>.
Системные внешние команды так запускать нельзя, т.к все они требуют длинной ко-
мандной строки с параметрами команды. Функциональные клавищи:
F2 - экран очищается и система переходит к вводу команды ДОС
F3 - копирование выбранного файла с запросом имени дисковода для копии. На зап-
рос следует отвечать нажатием клавиш 'A' или 'B'. Если указывается имя текущего
накопителя, то осуществляется копирование на одном НГМД с  остановкой для смены
диска (аналогично FCOPY), иначе осуществляется копирование файла на другой дис-
ковод (аналогично FCOPY2), без остановки для замены дисков.
F4 - вывод на экран текстового файла (аналогично команде TYPE)
F5 - удаление файла с запросом на подтверждение. Выводится запрос 'DEL (Y/N/)?'.
СТР - выбор дисковода. Используется для смены текущего привода или "перечитыва-
ния" диска в том же приводе при смене дискеты. Вводится имя  дисковода или <ВК>
при смене диска в том же накопителе.
УС - переход (при нажатии и удержании) к групповым операциям с файлами
УС+F2 - удаление всех файлов выведенных в таблице
УС+F3 - копирование всех файлов, выведенных в таблице, с запросом диска для ко-
пии (аналогично выбору накопителя в команде F3)
УС+F4 - задание фильтра.  Вводится шаблон, обязательно полных имен файлов.  При
старте оболочки задается шаблон '*.*', т.е любой файл. После нажатия <ВК> пере-
читывается  каталог  диска и в таблице выводятся только удовлетворяющие шаблону
файлы.
УС+F5 - выход в RK-DOS.
УС+СТР -  удаление  выбранного имени файла из таблицы (но не удаление с диска).
Как и задание фильтра, используется для  операций группового удаления или копи-
рования файлов (т.е УС+СТР используется для отмены  "маркировки"  нежелательных
файлов, хотя и удовлетворяющих заданному фильтру).
АР2 - отмена выбранной, но еще не исполненной команды
Если при запуске программы из оболочки SE будет выдано сообщение о нехватке ме-
ста в ОЗУ,  то такую большую программу следует запускать прямо из ДОС, выйдя из
оболочки SE.

		5.6 Исполняемые файлы ДОС

Расширение любого файла может состоять из любых 0-3 символов, но файлы имеющие
три стандартных для ДОС типа - .SYS, .COM, .BAT обрабатываются ДОС, как испол-
няемые файлы. Файлы таких типов могут запускаться при указании их имени в кома-
ндной строке, вводимой с клавиатуры. Расширение таких файлов можно не указывать
(если нет других файлов с таким именем). Достаточно  набрать имя файла и нажать
<ВК>. Если же на дискете есть файлы с одинаковыми именами (но разным расширени-
ем), то будет запущен на исполнение первый встретившийся файл. Для вызова конк-
ретного файла в такой ситуации, надо указать полное имя, с указанием типа. Фай-
лы типа .COM - это обычные исполняемые файлы: интерпретаторы и компиляторы язы-
ков высокого уровня,  ассемблеры,  прикладные,  системные и игровые программы в
машинных кодах.  Чаще  всего  такие программы создаются командой SAVE (например
после загрузки с ленты магнитофонного файла) или  являются выходным файлом ком-
пилятора с языка ассемблера. При запуске такого файла, коды загружаются в ОЗУ с
адреса, указанного в команде SAVE; после загрузки управление передается на пер-
вый адрес загруженного блока.  Файлы  типа .SYS - это перемещаемые программы (в
основном драйвера или резидентно работающие программы ДОС) - то есть такие про-
граммы, которые могут загружаться и работать в любом месте памяти. Они загружа-
ются в верхнюю  область  ОЗУ,  не занятую системой в текущий момент и не мешают
работе программ,  расположенных ниже.  Файлы типа .BAT - это пакетные косвенные
командные файлы, т.е содержат  текстовую  запись команд, вводимых с клавиатуры.
Такие файлы состоят из списка команд (каждая строка - новая команда или имя ис-
полняемого файла: .SYS/COM/BAT). Такие файлы создаются обычным текстовым редак-
тором (а иногда даже вводом в файл прямо из командной строки ДОС, точнее с уст-
ройства "консоль" - см.ниже). Но для исполнения BAT-файлов на текущем диске до-
лжен обязательно находиться  системный  файл COMMAND.COM. При запуске на испол-
нение пакетного командного файла верхняя граница свободного ОЗУ опускается  еще
на 500h байт. Поэтому если командный файл вызывается  другим  командным файлом,
то т.к при старте каждого очередного BAT-файла, в ОЗУ  загружается  своя  копия
COMMAND.COM, то при этом верхняя граница ОЗУ опускается уже на 500H+500H  байт.
Если на диске есть системный файл REM.SYS, то пакетный файл может содержать ко-
мментарии, выводимые на экран по мере выполнения BAT-файла.    При этом, каждая
строка комментария должна начинаться со слова REM. Примером пакетного командно-
го файла является файл AUTOEXEC.BAT, который запускается при первом запуске ДОС
независимо от желания пользователя. Вот один из его вариантов:
  DIR *.TXT
  REM ЗАГРУЗКА ФАЙЛА TEXT.TXT
  LOAD TEXT.TXT
  ASM
При автозапуске AUTOEXEC.BAT-файла при первом включении ДОС или запуске этого
файла с клавиатуры произойдет следующее:
   будет выведен список всех файлов с расширением TXT
   загрузится файл TEXT.TXT с сообщением об этом
   запустится на исполнение программа ассемблер

		5.7 Последовательные каналы ввода/вывода

Важнейшее свойство ДОС - управление  потоками  информации. Источниками потоков
или приемниками могут быть дисковые файлы,  клавиатура,  экран, принтер, а при
наличии доп.драйверов и другие каналы ввода/вывода. ДОС поддерживает 3 канала,
т.е 3 стандартных устройства:
дисковый файл (для чтения или записи)
CON - консоль (клавиатура - источник, экран - приемник информации)
PRN - принтер
Их можно использовать в командах ДОС (что для простоты  изложения,  было ранее
опущено при описании резидентных команд ДОС). Имя канала задается дополнитель-
ным параметром, через запятую. Например:
   A>DIR ,PRN<ВК> - распечатать на принтере каталог текущего диска
   A>TYPE имя[.тип]<ВК> - распечать текстовый файл на принтере
   A>TYPE CON,PRN<ВК> - включить режим прямой печати с  клавиатуры  на  принтер
			(режим "пишущая машинка из принтера"). Выход - F4.
   A>TYPE TEXT.TXT, B: КОПИЯ.TXT<ВК> - вывести файл TEXT.TXT  с накопителя A: в
				       файл КОПИЯ.TXT на диске B:  (копирование
				       файла с помощью команды TYPE).
   A>DIR *.TXT,CATALOG.TXT<ВК> - создать  на диске файл CATALOG.TXT  со списком
				 всех текстовых файлов дискеты
   A>TYPE CON,PRIMER.TXT<ВК> - создать файл PRIMER.TXT с клавиатуры. Конец вво-
			       да по нажатию клавиши F4.

		5.8  Сообщения ДОС об ошибках

I/O ERROR - ошибка ввода/вывода (обычно означает "дохлый" файл)
DISK LOCKED - диск защищен от записи
NO DISK - нет готовности НГМД (не стоит дискета, не закрыт карман, нет НГМД)
FILE NOT FOUND - файла с указанным именем на диске нет
SYNT ERR - ошибка в синтаксисе команды
DISK FULL - нет места на диске
NO EXT - не указано расширение файла, там где это обязательно
FILE LOCKED - файл защищен от записи атрибутом
END DATA - конец при чтении из файла, открытого на чтение
NAVE OPEN - файл уже открыт
NO OPEN FILE - файл не открыт. Попытка чтения или записи из неоткрытого файла
NO MEM - мало памяти для работы ДОС. Сообщение возникает, например при многок-
	 ратной вложенности пакетных файлов типа .BAT

		5.9 Формат хранения информации на дискете

   Диск разбит на 160 дорожек  (треков),  по 5 секторов на каждой дорожке. Каж-
дый сектор  имеет  размер  512 байт (или меньше). Всего на дискете при этом 800
секторов. 32-я дорожка (20h) используется для хранения первого сектора каталога
(сектор 1)  и VTOC (таблица занятости секторов диска, в секторе 0). Каждый байт
в таблице VTOC соответствует одному  треку диска (а каждый бит D0-D4 соответст-
вует сектору, если бит =1, то сектор занят). Пример VTOC:

	заняты сектора 1-4 трека 00
	|  заняты все сектора трека 01
	|  |     заняты сектора 0-3 трека 03 (сектор 4 - свободен)
	|  |     |     все сектора трека 05 свободны
	|  |     |     |
	|  |     |     |
       1E 1F 1F 0F 00 00 00 00 ....

Пример начального сектора каталога:

  трек и сектор следующего сектора каталога (если 00 00, то этот последний)
  |                     имя файла (здесь ABC) до десяти символов
  |                     |
+---+                +------+
20 02 00 00 00 00 00 41 42 43 00 00 00 00 00 00
00 00 43 4F 4D 03 01 00 11 0A 00 01 44 54 54 55
   |  +------; |   | +---+  |  |  | +------------>  продолжение каталога
   |     |     +---+   |    +--+  |                 или 00, если конец
   |     |       |     |     |    атрибуты файла
   | тип файла   |     |      \__ длина файла в секторах
   |    (COM)    |     адрес загрузки файла в ОЗУ
   |              \___ трек и сектор списка секторов файла (T/S LIST)
   нулевой байт (заполняется при ERASE)

Пример T/S LIST:

	     трек и сектор 2-го сектора файла
	    +---+       +---+ 4-й сектор файла
00 00 03 01 03 02 05 04 06 00 00 00
|   |  +--+       +---+       +---+
+---+    |         3-й           \___ конец списка
  |       \___ трек и сектор 1-го сектора файла
  |
  трек и сектор продолжения T/S LIST (или 00 00, если продолжения нет)

		5.10 Прикладные программы

    Совместно с RK-DOS может работать целый ряд системных, прикладных и игровых
программ. Наиболее важные из них - языки программирования: ассемблер, дизассем-
блер,  макроассемблер, Си, Паскаль, Фортран, Бэйсик и некоторые другие полезные
системные  программы  находятся  на гибком магнитном диске, входящем в комплект
поставки контроллера. Для повышения  надежности,   информация продублирована на
второй дискете. Кроме самих программ на ГМД находятся описания всех языков про-
граммирования (имеющихся на диске),  а также  описание  стандартных подпрограмм
ДОС и системных переменных ДОС (файлы DOS1.TXT и DOS2.TXT соответственно). Опи-
сания можно вывести на экран командой  TYPE или просматривать в редакторе "МИК-
РОН". Чтобы получить распечатки описаний,  можно  указать  в команде TYPE канал
PRN и вывести все тексты на печатающее устройство.
			-----------------------

	Уважаемый покупатель! Мы рады, что Вы сделали правильный выбор и вместо
покупки дорогой и ненужной  радиолюбителю, IBM PC подключили к Вашему РК86 дис-
ковод. Наше предприятие  постоянно занимается разработкой и усовершенствованием
программного обеспечения. Сообщите нам Ваш адрес и пришлите подписанный и опла-
ченный конверт и Вы  постоянно будете получать от нас информацию о новых разра-
ботках.  Кроме  ДОС,  рекомендуем Вам купить программу для программатора  РПЗУ,
схему подключения джойстика,  старые  и  новые игровые программы для управления
джойстиком (на дискете), схемы расширения ОЗУ (и соотв.версии ДОС),  рекоменда-
ции по подключению всех типов принтеров  и драйвера ДОС для Вашего типа принте-
ра, мощные текстовые редакторы, программы для поддержки КВ-радиосвязи и  другое
программное обеспечение с описанием. Наш адрес: Россия  127644  Москва  А/Я 23.

Данный текст и дампы кодов программ перекачал в формат IBM PC, отредактировал и
распространил  на дискетах в формате ОРИОНА-128 на территории СНГ - В.Чистяков.

-------------------------------------------------------------------------------

	П О Л Ь З О В А Т Е Л И    антикварного ПРК "ОРИОН-128" !  Срочно пере-
ходите на ПЭВМ "Радио-86РК" (РК86-МАКСИ с 64К ОЗУ и цветом!). При этом,  вместо
убогой CP/M-80, Вы получите возможность воспользоваться данной РК-ДОС.    Платы
для КНГМД РК86, Вы можете  купить  в  "ТОО ЛИАНОЗОВО" (они там уже продаются за
бесценок, а при желании Вы  легко  купите  всю оставшуюся партию в 100 штук для
перепродажи с целью личной наживы). К сожалению, платы РК86  уже  никто  в 1995
году в России не производит. Поэтому для желающих использовать РК-ДОС на убогом
компьютере ОРИОН-ПРО или ОРИОН, есть  перетранслированная версия RK-DOS имеющая
другой адрес порта (БИС 580ВВ55). А чтобы использовать приведенные в дампе коды
Вы можете отблокировать память F000-F003h в ОРИОНЕ с помощью доп.логики (запрет
по этим адресам ОЗУ), чтобы исключить "конфликт на шине" порта FDC и ОЗУ ОРИОНА

	       Долой ОРИОН-128 - убогий ПРК, погубленный ORDOS-ом,
	       мерзкой, гнусной и  просто жалкой  пародией на ДОС!

     Да здравствует "Радио-86РК", компьютер времен и народов для любителей!
